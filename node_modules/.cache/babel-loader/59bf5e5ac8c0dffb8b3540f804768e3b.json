{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport React from 'react';\nimport { MessageDeleted as DefaultMessageDeleted } from './MessageDeleted';\nimport { MessageOptions as DefaultMessageOptions } from './MessageOptions';\nimport { MessageRepliesCountButton as DefaultMessageRepliesCountButton } from './MessageRepliesCountButton';\nimport { MessageText } from './MessageText';\nimport { MessageTimestamp as DefaultMessageTimestamp } from './MessageTimestamp';\nimport { areMessageUIPropsEqual, messageHasAttachments, messageHasReactions } from './utils';\nimport { Avatar as DefaultAvatar } from '../Avatar';\nimport { MML } from '../MML';\nimport { ReactionSelector as DefaultReactionSelector, ReactionsList as DefaultReactionsList } from '../Reactions';\nimport { useComponentContext } from '../../context/ComponentContext';\nimport { useMessageContext } from '../../context/MessageContext';\n\nvar MessageCommerceWithContext = function (props) {\n  var _a, _b, _c, _d, _e, _f;\n\n  var groupStyles = props.groupStyles,\n      handleAction = props.handleAction,\n      handleOpenThread = props.handleOpenThread,\n      isMyMessage = props.isMyMessage,\n      isReactionEnabled = props.isReactionEnabled,\n      message = props.message,\n      onUserClick = props.onUserClick,\n      onUserHover = props.onUserHover,\n      reactionSelectorRef = props.reactionSelectorRef,\n      showDetailedReactions = props.showDetailedReactions,\n      threadList = props.threadList;\n\n  var _g = useComponentContext('MessageCommerce'),\n      Attachment = _g.Attachment,\n      _h = _g.Avatar,\n      Avatar = _h === void 0 ? DefaultAvatar : _h,\n      _j = _g.MessageDeleted,\n      MessageDeleted = _j === void 0 ? DefaultMessageDeleted : _j,\n      _k = _g.MessageRepliesCountButton,\n      MessageRepliesCountButton = _k === void 0 ? DefaultMessageRepliesCountButton : _k,\n      _l = _g.MessageOptions,\n      MessageOptions = _l === void 0 ? DefaultMessageOptions : _l,\n      _m = _g.MessageTimestamp,\n      MessageTimestamp = _m === void 0 ? DefaultMessageTimestamp : _m,\n      _o = _g.ReactionSelector,\n      ReactionSelector = _o === void 0 ? DefaultReactionSelector : _o,\n      _p = _g.ReactionsList,\n      ReactionsList = _p === void 0 ? DefaultReactionsList : _p;\n\n  var hasAttachment = messageHasAttachments(message);\n  var hasReactions = messageHasReactions(message);\n  var firstGroupStyle = groupStyles ? groupStyles[0] : 'single';\n  var messageClasses = \"str-chat__message-commerce str-chat__message-commerce--\" + (isMyMessage() ? 'right' : 'left');\n\n  if (message.deleted_at) {\n    return React.createElement(MessageDeleted, {\n      message: message\n    });\n  }\n\n  if (message.customType === 'message.date') {\n    return null;\n  }\n\n  return React.createElement(\"div\", {\n    className: (\"\\n\\t\\t\\t\\t\\t\\t\" + messageClasses + \"\\n\\t\\t\\t\\t\\t\\tstr-chat__message-commerce--\" + message.type + \"\\n\\t\\t\\t\\t\\t\\t\" + (message.text ? 'str-chat__message-commerce--has-text' : 'str-chat__message-commerce--has-no-text') + \"\\n\\t\\t\\t\\t\\t\\t\" + (hasAttachment ? 'str-chat__message-commerce--has-attachment' : '') + \"\\n            \" + (hasReactions && isReactionEnabled ? 'str-chat__message-commerce--with-reactions' : '') + \"\\n            \" + (\"str-chat__message-commerce--\" + firstGroupStyle) + \"\\n            \" + (message.pinned ? 'pinned-message' : '') + \"\\n\\t\\t\\t\\t\\t\").trim(),\n    \"data-testid\": 'message-commerce-wrapper',\n    key: message.id\n  }, (firstGroupStyle === 'bottom' || firstGroupStyle === 'single') && React.createElement(Avatar, {\n    image: (_a = message.user) === null || _a === void 0 ? void 0 : _a.image,\n    name: ((_b = message.user) === null || _b === void 0 ? void 0 : _b.name) || ((_c = message.user) === null || _c === void 0 ? void 0 : _c.id),\n    onClick: onUserClick,\n    onMouseOver: onUserHover\n  }), React.createElement(\"div\", {\n    className: 'str-chat__message-commerce-inner'\n  }, React.createElement(React.Fragment, null, React.createElement(MessageOptions, {\n    displayLeft: false,\n    displayReplies: false,\n    theme: 'commerce'\n  }), hasReactions && !showDetailedReactions && isReactionEnabled && React.createElement(ReactionsList, null), showDetailedReactions && isReactionEnabled && React.createElement(ReactionSelector, {\n    ref: reactionSelectorRef\n  })), ((_d = message.attachments) === null || _d === void 0 ? void 0 : _d.length) ? React.createElement(Attachment, {\n    actionHandler: handleAction,\n    attachments: message.attachments\n  }) : null, message.mml && React.createElement(MML, {\n    actionHandler: handleAction,\n    align: isMyMessage() ? 'right' : 'left',\n    source: message.mml\n  }), message.text && React.createElement(MessageText, {\n    customInnerClass: 'str-chat__message-commerce-text-inner',\n    customWrapperClass: 'str-chat__message-commerce-text',\n    theme: 'commerce'\n  }), !threadList && React.createElement(\"div\", {\n    className: 'str-chat__message-commerce-reply-button'\n  }, React.createElement(MessageRepliesCountButton, {\n    onClick: handleOpenThread,\n    reply_count: message.reply_count\n  })), React.createElement(\"div\", {\n    className: 'str-chat__message-commerce-data'\n  }, !isMyMessage() ? React.createElement(\"span\", {\n    className: 'str-chat__message-commerce-name'\n  }, ((_e = message.user) === null || _e === void 0 ? void 0 : _e.name) || ((_f = message.user) === null || _f === void 0 ? void 0 : _f.id)) : null, React.createElement(MessageTimestamp, {\n    customClass: 'str-chat__message-commerce-timestamp',\n    format: 'LT'\n  }))));\n};\n\nvar MemoizedMessageCommerce = React.memo(MessageCommerceWithContext, areMessageUIPropsEqual);\n/**\n * @deprecated - This UI component will be removed in the next major release.\n *\n * UI component that renders a message and receives functionality from the Message/MessageList components\n */\n\nexport var MessageCommerce = function (props) {\n  var messageContext = useMessageContext('MessageCommerce');\n  return React.createElement(MemoizedMessageCommerce, __assign({}, messageContext, props));\n};","map":null,"metadata":{},"sourceType":"module"}