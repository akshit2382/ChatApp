{"ast":null,"code":"import { useMemo, useRef } from 'react';\nexport function usePrependedMessagesCount(messages) {\n  var _a;\n\n  var currentFirstMessageId = (_a = messages === null || messages === void 0 ? void 0 : messages[0]) === null || _a === void 0 ? void 0 : _a.id;\n  var firstMessageId = useRef(currentFirstMessageId);\n  var earliestMessageId = useRef(currentFirstMessageId);\n  var previousNumItemsPrepended = useRef(0);\n  var numItemsPrepended = useMemo(function () {\n    if (!messages || !messages.length) {\n      return 0;\n    } // if no new messages were prepended, return early (same amount as before)\n\n\n    if (currentFirstMessageId === earliestMessageId.current) {\n      return previousNumItemsPrepended.current;\n    }\n\n    if (!firstMessageId.current) {\n      firstMessageId.current = currentFirstMessageId;\n    }\n\n    earliestMessageId.current = currentFirstMessageId; // if new messages were prepended, find out how many\n    // start with this number because there cannot be fewer prepended items than before\n\n    for (var i = previousNumItemsPrepended.current; i < messages.length; i += 1) {\n      if (messages[i].id === firstMessageId.current) {\n        previousNumItemsPrepended.current = i;\n        return i;\n      }\n    }\n\n    return 0; // TODO: there's a bug here, the messages prop is the same array instance (something mutates it)\n    // that's why the second dependency is necessary\n  }, [messages, messages === null || messages === void 0 ? void 0 : messages.length]);\n  return numItemsPrepended;\n}","map":null,"metadata":{},"sourceType":"module"}